(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();const f={openDays:[1,2,3,4,5,6,7,0],openTime:"07:00",closeTime:"16:00"},c={DEFAULT_ZOOM:13,FIRST_KM_RATE:1e4,NEXT_KM_RATE:2e3,API_KEY:"pk.9acafd08e3a713792f86eb543d5c41c2",WEATHER_API_KEY:"5273980d01c5005aa4a4ab42d1f06356",WHATSAPP_NUMBER:"6289506105562"},p=[[-6.469485452037356,106.83419206845015],[-6.4831713348284135,106.83805199440066],[-6.492081172078224,106.84616053943076],[-6.47945952980614,106.87766040210165],[-6.457200323980742,106.90280879382529],[-6.418480948611072,106.89223261650149],[-6.446350589339875,106.85671066782373]],N={color:"blue",fillColor:"blue",fillOpacity:.1};function k(n){let e=1/0,t=-1/0,s=1/0,i=-1/0;return n.forEach(o=>{e=Math.min(e,o[0]),t=Math.max(t,o[0]),s=Math.min(s,o[1]),i=Math.max(i,o[1])}),{lat:(e+t)/2,lng:(s+i)/2}}function M(n,e){const t=n.lat,s=n.lng;let i=!1;for(let o=0,r=e.length-1;o<e.length;r=o++){const d=e[o][0],u=e[o][1],m=e[r][0],S=e[r][1];u>s!=S>s&&t<(m-d)*(s-u)/(S-u)+d&&(i=!i)}return i}async function B(n){try{if(!n||!n.lat||!n.lng)throw new Error("Invalid coordinates");const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${n.lat}&lon=${n.lng}&appid=${c.WEATHER_API_KEY}&units=metric`);if(!e.ok)throw new Error(`Weather API error: ${e.status}`);const t=await e.json();if(!t||!t.main||!t.weather||!t.weather[0])throw new Error("Invalid weather data format");const s=Math.round(t.main.temp),i=t.weather[0],o=i.description,u=`<img id="weather-icon" src="${`https://openweathermap.org/img/wn/${i.icon}.png`}" alt="${o}" style="vertical-align: middle;"> ${s}Â°C - ${o}`,m=document.getElementById("weather-info");m&&(m.innerHTML=u)}catch(e){console.error("Weather service error:",e.message);const t=document.getElementById("weather-info");t&&(t.innerHTML='<span style="color: #666;">Weather data unavailable</span>')}}function R(n){if(!n||n<=0)return 0;let e;if(n<=1)e=c.FIRST_KM_RATE;else{const t=n-1;e=c.FIRST_KM_RATE+t*c.NEXT_KM_RATE}return Math.ceil(e/100)*100}function $(n){const e=document.getElementById("argo");e&&(e.innerText=`Argo: Rp ${n}`,U(n))}function U(n){const e=document.getElementById("order-button");if(e){const t=!n||n===0;e.disabled=t,e.style.backgroundColor=t?"#cccccc":"",e.style.cursor=t?"not-allowed":"pointer"}}class _{constructor(){this.debounceTimers=new Map,this.throttleTimers=new Map,this.intersectionObserver=null,this.setupIntersectionObserver()}debounce(e,t,s){this.debounceTimers.has(s)&&clearTimeout(this.debounceTimers.get(s));const i=setTimeout(()=>{e(),this.debounceTimers.delete(s)},t);this.debounceTimers.set(s,i)}throttle(e,t,s){if(this.throttleTimers.has(s))return;e();const i=setTimeout(()=>{this.throttleTimers.delete(s)},t);this.throttleTimers.set(s,i)}lazyLoadImages(){document.querySelectorAll("img[data-src]").forEach(t=>{this.intersectionObserver.observe(t)})}setupIntersectionObserver(){"IntersectionObserver"in window&&(this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(t=>{if(t.isIntersecting){const s=t.target;s.src=s.dataset.src,s.removeAttribute("data-src"),this.intersectionObserver.unobserve(s)}})},{rootMargin:"50px"}))}optimizeMapRendering(e){this.isMobile()&&(e.options.zoomSnap=.5,e.options.wheelPxPerZoomLevel=120),e.on("movestart",()=>{this.throttle(()=>{},16,"mapMove")})}isMobile(){return window.innerWidth<=768||"ontouchstart"in window}optimizeSearch(e,t=300){return s=>{this.debounce(()=>{e(s)},t,"search")}}cleanup(){this.debounceTimers.forEach(e=>clearTimeout(e)),this.throttleTimers.forEach(e=>clearTimeout(e)),this.debounceTimers.clear(),this.throttleTimers.clear(),this.intersectionObserver&&this.intersectionObserver.disconnect()}preloadResources(e){e.forEach(t=>{const s=document.createElement("link");s.rel="prefetch",s.href=t,document.head.appendChild(s)})}loadModuleWhenNeeded(e){return new Promise(t=>{"requestIdleCallback"in window?requestIdleCallback(()=>{import(e).then(t)}):setTimeout(()=>{import(e).then(t)},0)})}}const g=new _;class H{constructor(){this.touchStartY=0,this.touchEndY=0,this.isScrolling=!1,this.setupMobileOptimizations()}setupMobileOptimizations(){this.preventDoubleTabZoom(),this.optimizeTouchScrolling(),this.handleOrientationChange(),this.optimizeViewport(),this.setupTouchGestures()}preventDoubleTabZoom(){let e=0;document.addEventListener("touchend",t=>{const s=new Date().getTime();s-e<=300&&t.preventDefault(),e=s},!1)}optimizeTouchScrolling(){document.body.style.webkitOverflowScrolling="touch";let e=!1;const t=()=>{this.isScrolling=!1,e=!1};document.addEventListener("scroll",()=>{this.isScrolling=!0,e||(requestAnimationFrame(t),e=!0)},{passive:!0})}handleOrientationChange(){window.addEventListener("orientationchange",()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize")),window.scrollTo(0,0)},100)})}optimizeViewport(){const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`)};e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)})}setupTouchGestures(){document.addEventListener("touchstart",e=>{this.touchStartY=e.touches[0].clientY},{passive:!0}),document.addEventListener("touchmove",e=>{e.touches[0].clientY>this.touchStartY&&window.scrollY===0&&e.preventDefault()},{passive:!1}),document.addEventListener("touchend",e=>{this.touchEndY=e.changedTouches[0].clientY},{passive:!0})}optimizeMapForMobile(e){this.isMobile()&&e&&(e.touchZoom&&typeof e.touchZoom.disable=="function"&&e.touchZoom.disable(),e.doubleClickZoom&&typeof e.doubleClickZoom.disable=="function"&&e.doubleClickZoom.disable(),e.tap&&typeof e.tap.enable=="function"&&e.tap.enable(),e.touchZoom&&typeof e.touchZoom.enable=="function"&&e.touchZoom.enable(),e.options&&(e.options.preferCanvas=!0,e.options.updateWhenZooming=!1))}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768}optimizeFormInputs(){document.querySelectorAll("input, select, textarea").forEach(t=>{this.isMobile()&&(t.addEventListener("focus",()=>{t.style.fontSize="16px"}),t.addEventListener("blur",()=>{t.style.fontSize=""}))})}handleSafeAreaInsets(){CSS.supports("padding-top: env(safe-area-inset-top)")&&(document.documentElement.style.setProperty("--safe-area-top","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--safe-area-bottom","env(safe-area-inset-bottom)"))}optimizeAnimations(){navigator.hardwareConcurrency&&navigator.hardwareConcurrency<=2&&document.documentElement.style.setProperty("--animation-duration","0.1s"),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.documentElement.style.setProperty("--animation-duration","0.01ms")}}const v=new H;let l,h,b,E;function O(){const n=k(p);l=L.map("map",{preferCanvas:v.isMobile(),zoomControl:!v.isMobile(),attributionControl:!1}).setView([n.lat,n.lng],c.DEFAULT_ZOOM),window.mapInstance=l,L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,loading:"lazy"}).addTo(l);const e=L.polygon(p,{...N,interactive:!1}).addTo(l),t=L.divIcon({className:"custom-marker",html:`<div style="
      width: 24px;
      height: 24px;
      background: #2563eb;
      border: 3px solid white;
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      transform: translate(-50%, -50%);
    "></div>`,iconSize:[24,24],iconAnchor:[12,12]});h=L.marker([n.lat,n.lng],{draggable:!1,icon:t}).addTo(l),l.fitBounds(e.getBounds()),v.optimizeMapForMobile(l),Y(),F()}function Y(){h.on("dragend",function(n){const e=n.target.getLatLng();if(!M(e,p)){const t=k(p);n.target.setLatLng([t.lat,t.lng]),w("PASTIKAN LOKASI BERADA DALAM RADIUS LAYANAN");return}W()||(E=e,g.throttle(()=>{B(e)},1e3,"weather"),z())})}function F(){document.getElementById("confirm-pickup").addEventListener("click",Z),document.getElementById("confirm-pickup").disabled=!0}function q(){if(navigator.geolocation){const n=document.getElementById("auto-location"),e=n.innerHTML;n.innerHTML=`
      <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="animation: spin 1s linear infinite;">
        <path d="M12 2v2c5.39.87 9.5 5.7 9.5 11.5s-4.11 10.63-9.5 11.5v2c6.5-.93 11.5-6.78 11.5-13.5S18.5 2.93 12 2z"/>
      </svg>
      Mencari lokasi...
    `,n.disabled=!0,navigator.geolocation.getCurrentPosition(function(t){const s={lat:t.coords.latitude,lng:t.coords.longitude};if(M(s,p))h.setLatLng(s),l.setView(s,c.DEFAULT_ZOOM),b=s,document.getElementById("confirm-pickup").disabled=!1,n.innerHTML=`
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
            Lokasi ditemukan!
          `,setTimeout(()=>{n.innerHTML=e,n.disabled=!1},2e3);else{const i=k(p);h.setLatLng([i.lat,i.lng]),w("LAYANAN KHUSUS GUNUNG PUTRI"),n.innerHTML=e,n.disabled=!1}},function(t){w("Tidak dapat mengakses lokasi. Pastikan GPS aktif."),n.innerHTML=e,n.disabled=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}else w("Geolocation tidak didukung oleh browser ini.")}function Z(){if(!b){w("Gunakan tombol AUTO LOCATION untuk menentukan lokasi pickup");return}document.getElementById("step-pickup").classList.remove("active"),document.getElementById("step-destination").classList.add("active");const n=k(p);h.setLatLng([n.lat,n.lng]),l.setView([n.lat,n.lng],c.DEFAULT_ZOOM);const e=L.divIcon({className:"custom-marker",html:`<div style="
      width: 24px;
      height: 24px;
      background: #10b981;
      border: 3px solid white;
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      transform: translate(-50%, -50%);
    "></div>`,iconSize:[24,24],iconAnchor:[12,12]});h.setIcon(e),h.dragging.enable()}function K(n){return M(n,p)?(E=n,h.setLatLng([n.lat,n.lng]),l.setView([n.lat,n.lng],c.DEFAULT_ZOOM),g.throttle(()=>{B(n)},1e3,"weather"),z(),!0):(w("LAYANAN KHUSUS GUNUNG PUTRI"),!1)}function z(){if(!b||!E)return;const n=l.distance(b,E)/1e3,e=R(n);$(e);const t=document.getElementById("argo");t.style.transform="scale(1.05)",setTimeout(()=>{t.style.transform=""},300)}function W(){return document.getElementById("step-pickup").classList.contains("active")}function w(n){const e=document.createElement("div");e.className="modern-alert-overlay",e.innerHTML=`
    <div class="modern-alert">
      <div class="alert-icon">â ï¸</div>
      <div class="alert-message">${n}</div>
      <button class="alert-button" onclick="this.parentElement.parentElement.remove()">OK</button>
    </div>
  `,e.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.3s ease;
  `,document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},3e3)}function G(){return b}function j(){return E}let x,T=!1,a=-1;function C(){const n=document.getElementById("address-search"),e=document.getElementById("address-results");!n||!e||(n.addEventListener("input",t=>{clearTimeout(x);const s=t.target.value.trim();if(a=-1,s.length<2){y(e);return}V(e),x=setTimeout(()=>{P(s,e)},200)}),n.addEventListener("focus",()=>{const t=n.value.trim();t.length>=2&&!T&&P(t,e)}),document.addEventListener("click",t=>{t.target.closest(".search-container")||(y(e),a=-1)}),document.addEventListener("touchstart",t=>{t.target.closest(".search-container")||(y(e),a=-1)},{passive:!0}),n.addEventListener("keydown",t=>{const s=e.querySelectorAll(".search-result-item");switch(t.key){case"ArrowDown":t.preventDefault(),s.length>0&&(a=Math.min(a+1,s.length-1),I(s));break;case"ArrowUp":t.preventDefault(),s.length>0&&(a=Math.max(a-1,-1),I(s));break;case"Enter":t.preventDefault(),a>=0&&s[a]?s[a].click():s.length>0&&s[0].click();break;case"Escape":y(e),a=-1,n.blur();break}}))}function I(n){n.forEach((e,t)=>{e.classList.remove("focused"),t===a&&(e.classList.add("focused"),e.scrollIntoView({block:"nearest",behavior:"smooth"}))})}function V(n){n.innerHTML='<div class="search-loading">ð Mencari lokasi...</div>',n.classList.add("visible"),a=-1}function y(n){n.classList.remove("visible"),a=-1,setTimeout(()=>{n.innerHTML=""},150)}async function P(n,e){if(!T){T=!0;try{if(!c||!c.API_KEY)throw new Error("Configuration not properly loaded");const t="https://us1.locationiq.com/v1/search.php",s=new URLSearchParams({key:c.API_KEY,q:`${n}, Indonesia`,format:"json",addressdetails:1,limit:8,countrycodes:"id",bounded:1,viewbox:"106.7,-6.6,107.1,-6.1"}),i=await fetch(`${t}?${s}`,{method:"GET",headers:{Accept:"application/json","User-Agent":"BogorPass/1.0"}});if(!i.ok){const r=await i.text();throw console.error("LocationIQ API error:",r),new Error(`LocationIQ API error: ${i.status}`)}const o=await i.json();console.log("Search results:",o),J(o,e,n)}catch(t){console.error("Search error:",t),ne(e,t.message)}finally{T=!1}}}function J(n,e,t){if(!n||n.length===0){e.innerHTML=`
      <div class="no-results">
        <div class="no-results-icon">ð</div>
        <div class="no-results-text">Tidak ada hasil untuk "${t}"</div>
        <div class="no-results-suggestion">Coba kata kunci yang lebih spesifik</div>
      </div>
    `,e.classList.add("visible"),a=-1,A(e);return}const s=n.filter(o=>o.display_name&&o.lat&&o.lon).slice(0,6),i=document.createElement("div");i.className="search-results",s.forEach((o,r)=>{const d=Q(o,r);i.appendChild(d)}),e.innerHTML="",e.appendChild(i),e.classList.add("visible"),A(e),setTimeout(()=>{const o=e.querySelectorAll(".search-result-item");o.length>0&&(a=0,I(o))},100)}function A(n){(window.innerWidth<=768||"ontouchstart"in window)&&requestAnimationFrame(()=>{const t=n.closest(".search-container");if(t){const s=t.getBoundingClientRect(),o=(window.pageYOffset||document.documentElement.scrollTop)+s.top-20;window.scrollTo({top:o,behavior:"smooth"})}})}function Q(n,e){const t=document.createElement("div");t.className="search-result-item",t.style.animationDelay=`${e*50}ms`,t.setAttribute("tabindex","0");const s=ee(n.display_name),i=n.address||{};t.innerHTML=`
    <div class="result-content">
      <div class="result-icon">ð</div>
      <div class="result-details">
        <div class="result-name">${s}</div>
        <div class="result-address">${te(i)}</div>
      </div>
    </div>
  `;const o=r=>{r.preventDefault(),r.stopPropagation(),t.style.transform="scale(0.98)",t.style.backgroundColor="var(--primary-color)",t.style.color="white",setTimeout(()=>{const d={lat:parseFloat(n.lat),lng:parseFloat(n.lon)};if(K(d)){const u=document.getElementById("address-results"),m=document.getElementById("address-search");y(u),m.value=s,X(),document.body.offsetHeight,se("Lokasi berhasil dipilih")}else t.style.transform="",t.style.backgroundColor="",t.style.color=""},150)};return t.addEventListener("click",o),t.addEventListener("keydown",r=>{(r.key==="Enter"||r.key===" ")&&o(r)}),t.addEventListener("mouseenter",()=>{const r=document.querySelectorAll(".search-result-item");a=Array.from(r).indexOf(t),I(r)}),t.addEventListener("touchstart",r=>{t.style.backgroundColor="var(--bg-tertiary)"},{passive:!0}),t.addEventListener("touchend",r=>{setTimeout(()=>{t.style.backgroundColor!=="var(--primary-color)"&&(t.style.backgroundColor="")},100)},{passive:!0}),t}function X(){const n=document.getElementById("order-button");n&&n.classList.add("show")}function ee(n){const e=n.split(",");return e.length>3?e.slice(0,3).join(", "):n}function te(n){const e=[];return n.road&&e.push(n.road),n.suburb&&e.push(n.suburb),(n.city||n.town||n.village)&&e.push(n.city||n.town||n.village),e.join(", ")||"Alamat tidak tersedia"}function ne(n,e){n.innerHTML=`
    <div class="search-error">
      <div class="error-icon">â ï¸</div>
      <div class="error-text">Pencarian gagal</div>
      <div class="error-detail">${e}</div>
      <button class="retry-search" onclick="this.parentElement.parentElement.previousElementSibling.focus()">
        Coba Lagi
      </button>
    </div>
  `,n.classList.add("visible"),a=-1,A(n)}function se(n){const e=document.createElement("div");e.className="success-toast",e.innerHTML=`
    <div class="toast-content">
      <span class="toast-icon">â</span>
      <span class="toast-message">${n}</span>
    </div>
  `,document.body.appendChild(e),requestAnimationFrame(()=>{e.classList.add("visible")}),setTimeout(()=>{e.classList.remove("visible"),setTimeout(()=>{e.parentElement&&e.remove()},300)},3e3)}function ie(){const n=document.getElementById("service").value,e=j(),t=G(),s=document.getElementById("argo"),i=s.textContent||s.innerText,o=parseInt(i.replace(/[^\d]/g,""));if(!e||!t){alert("Pastikan titik pickup dan tujuan sudah ditentukan.");return}if(isNaN(o)||o===0){alert("PILIH TUJUAN");return}const r=`https://www.google.com/maps?q=${e.lat},${e.lng}`,d=`https://www.google.com/maps?q=${t.lat},${t.lng}`,u=`JENIS LAYANAN: ${n}%0ATUJUAN: ${r}%0APICK UP: ${d}%0AARGO: Rp ${o}`,m=`https://wa.me/${c.WHATSAPP_NUMBER}?text=${u}`;window.open(m,"_blank")}class oe{constructor(){this.countdownInterval=null,this.messageIndex=0,this.messages=["hai...kita sedang tutup coba nanti pagi yaa","kita akan buka setelah countdown selesai :D"]}isOpen(){const e=new Date,t=e.getDay(),s=e.toTimeString().slice(0,5);return f.openDays.includes(t)&&s>=f.openTime&&s<f.closeTime}startCountdown(e,t){if(this.countdownInterval)return;const s=()=>{const i=new Date,o=this.getNextOpenTime();if(this.isOpen()){this.stopCountdown(),t();return}const r=this.calculateTimeDifference(o,i);if(!r){this.stopCountdown(),t();return}e(this.formatTime(r))};s(),this.countdownInterval=setInterval(s,1e3)}stopCountdown(){this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)}getNextOpenTime(){const e=new Date,t=e.getDay(),s=e.toTimeString().slice(0,5);let i=new Date;const[o,r]=f.openTime.split(":").map(Number);if(i.setHours(o,r,0,0),!f.openDays.includes(t)||s>=f.closeTime)do i.setDate(i.getDate()+1);while(!f.openDays.includes(i.getDay()));return i}calculateTimeDifference(e,t){const s=e-t;return s<=0?null:{hours:Math.floor(s/(1e3*60*60)%24),minutes:Math.floor(s/1e3/60%60),seconds:Math.floor(s/1e3%60)}}formatTime(e){return e?`${String(e.hours).padStart(2,"0")}:${String(e.minutes).padStart(2,"0")}:${String(e.seconds).padStart(2,"0")}`:"00:00:00"}switchMessage(){const e=document.getElementById("message");e.classList.remove("visible"),setTimeout(()=>{this.messageIndex=(this.messageIndex+1)%this.messages.length,e.textContent=this.messages[this.messageIndex],e.classList.add("visible")},500)}}class D{constructor(){this.scheduler=new oe,this.initializeElements(),this.setupEventListeners(),this.setupPerformanceOptimizations(),this.updateUI(),setInterval(()=>this.updateUI(),1e3),setInterval(()=>this.scheduler.switchMessage(),3e3)}initializeElements(){this.elements={content:document.getElementById("content"),overlay:document.getElementById("overlay"),countdown:document.getElementById("countdown"),message:document.getElementById("message"),autoLocation:document.getElementById("auto-location"),confirmPickup:document.getElementById("confirm-pickup"),orderButton:document.getElementById("order-button")}}setupEventListeners(){this.elements.autoLocation.addEventListener("click",q),this.elements.confirmPickup.addEventListener("click",()=>{this.transitionToDestination()}),this.elements.orderButton.addEventListener("click",ie),window.addEventListener("resize",()=>{g.throttle(()=>{this.handleResize()},100,"resize")},{passive:!0})}setupPerformanceOptimizations(){v.optimizeFormInputs(),v.handleSafeAreaInsets(),v.optimizeAnimations(),g.preloadResources(["./services/weatherService.js","./services/orderService.js"]),g.lazyLoadImages()}transitionToDestination(){const e=document.getElementById("step-pickup"),t=document.getElementById("step-destination");e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{e.classList.remove("active"),t.classList.add("active"),t.style.opacity="0",t.style.transform="translateY(10px)",requestAnimationFrame(()=>{t.style.opacity="1",t.style.transform="translateY(0)"})},150)}handleResize(){const e=window.mapInstance;e&&e.invalidateSize()}updateUI(){this.scheduler.isOpen()?this.showMainContent():this.showCountdownOverlay()}showMainContent(){this.elements.content.style.display="block",this.elements.overlay.style.display="none",this.elements.overlay.classList.remove("visible"),this.scheduler.stopCountdown()}showCountdownOverlay(){this.elements.content.style.display="none",this.elements.overlay.style.display="flex",requestAnimationFrame(()=>{this.elements.overlay.classList.add("visible")}),this.scheduler.startCountdown(e=>{this.elements.countdown.textContent=e},()=>{this.hideCountdownOverlay()})}hideCountdownOverlay(){this.elements.overlay.classList.remove("visible"),setTimeout(()=>{this.elements.content.style.display="block",this.elements.overlay.style.display="none"},300)}destroy(){g.cleanup()}}document.addEventListener("DOMContentLoaded",()=>{"IntersectionObserver"in window&&"requestIdleCallback"in window?requestIdleCallback(()=>{new D,O(),C()}):(new D,O(),C())});document.addEventListener("visibilitychange",()=>{document.hidden&&g.throttle(()=>{},1e3,"visibility")});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
